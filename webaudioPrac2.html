<html>
	<head>
		<title>Webaudio Prac</title>
		<script type="text/javascript">
		window.AudioContext = window.AudioContext || window.webkitAudioContext;
		var context = new AudioContext();


		var soundBuffer;
		console.log('SOUND BUFFER POST DEFINITION',soundBuffer);

		function playSound(buffer,howLongToWait){
			var source = context.createBufferSource();
			source.buffer = buffer;
			source.connect(context.destination);
			source.start(howLongToWait);
		}

		function loadSound(url,whatsGettingData){
			var request = new XMLHttpRequest();
			request.open('GET',url,true);
			request.responseType = 'arraybuffer';

			request.onload = function(){
				context.decodeAudioData(request.response, function(buffer){
					whatsGettingData=buffer;
					playSound(whatsGettingData,4);
					console.log('SOUND BUFFER POST ONLOAD PLAY',soundBuffer);
				});
			}
			request.send();
		}
		console.log('SOUND BUFFER POST LOAD SOUND',soundBuffer);

		loadSound('superBlast.mp3',soundBuffer);
		playSound(whatsGettingData,0);

		function keyDownEvent(event){
			console.log('SOUND BUFFER PRE KEYDOWN PLAY SOUND',soundBuffer);
			playSound(soundBuffer,0);
		}

		</script>
	</head>
	<body onkeydown="keyDownEvent(event)">
	</body>
</html>